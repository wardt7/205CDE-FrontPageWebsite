<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: addentry.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: addentry.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
'use strict'

/**
* Client side code used generate the posts
* The code uses XMLHttpRequest to send an authorization request to the server
* @module addentry
* @requires XMLHttpRequest
*/

/**
* Object that defines the HTTP status codes we use
* @name status
* @type {object}
* @const
*/
const status = {
	'OK': 200
}

/**
* Function that uses XMLHTTPRequest to create the posts on the home page
* @function XMLHTTPRequest/addentry
* @param {string} requestType - GET
* @param {string} path - /adduser
* @param {boolean} async - We set the async property to true for time efficiency
* @returns {object} posts - We receive the posts from the database and insert them into the HTML.
*/
function getPosts(){
	console.log('starting getPosts')
	const xhr = new XMLHttpRequest()
	xhr.open('GET', '/database/posts', true)
	xhr.onload = () => {
		if (xhr.readyState === xhr.DONE) {
			if (xhr.status === status.OK) {
				console.log(xhr.responseText)
				const response = JSON.parse(xhr.responseText)
				console.log(response)
				const section = document.getElementById('entries')
				console.log(response['data'])
				for (const item of response['data']){
					console.log(item)
					const blog = document.createElement('article')
					const title = document.createElement('h2')
					const titleNode = document.createTextNode(`${item.title}`)
					title.appendChild(titleNode)
					const user = document.createElement('h4')
					const userNode = document.createTextNode(`Author: ${item.username}`)
					user.appendChild(userNode)
					const content = document.createElement('p')
					const contentNode = document.createTextNode(`${item.content}`)
					content.appendChild(contentNode)
					blog.appendChild(title)
					blog.appendChild(user)
					blog.appendChild(content)
					section.appendChild(blog)
				}
			}
		} else {
			console.error(xhr.statusText)
		}
	}
	xhr.onerror = () => {
		console.error(xhr.statusText)
	}
	xhr.send(null)
}


getPosts()


</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-addentry.html">addentry</a></li><li><a href="module-addnavbar.html">addnavbar</a></li><li><a href="module-redirectorCreate.html">redirectorCreate</a></li><li><a href="module-redirectorSubmit.html">redirectorSubmit</a></li><li><a href="module-signupListen.html">signupListen</a></li><li><a href="module-submitPostListen.html">submitPostListen</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Apr 16 2018 08:31:49 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
